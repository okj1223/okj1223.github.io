---
layout: default
---

<!-- 🌿 에코 테마 CSS 강제 로드 -->
<link rel="stylesheet" href="{{ '/assets/css/ecosystem.css' | relative_url }}">

<!-- 상세 페이지 본문 시작 -->
<section class="project-hero">
  <div class="container">
    <h1 class="project-title">{{ page.title }}</h1>
    {% if page.description %}
      <p class="project-subtitle">{{ page.description }}</p>
    {% endif %}
  </div>
</section>

<section class="project-overview">
  <div class="container project-layout">
    <!-- 본문 영역 -->
    <main class="project-content">
      {{ content }}

      {% if page.video_url %}
      <div class="video-inline">
        <h2>Demo Video</h2>
        <div class="video-wrapper">
          <iframe
            src="{{ page.video_url }}"
            title="{{ page.title }}"
            frameborder="0"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      {% endif %}
    </main>

    <!-- 자동 TOC 사이드바 -->
    <aside class="project-toc" id="toc-sidebar">
      <h4>📋 Contents</h4>
      <nav id="toc-nav">
        <!-- TOC가 여기에 자동 생성됩니다 -->
      </nav>
    </aside>
  </div>
</section>

<section class="project-back">
  <div class="container">
    <a href="{{ '/projects/' | relative_url }}" class="button view-all-button">
      &larr; Back to Projects
    </a>
  </div>
</section>

<!-- 🌿 에코 테마 배경 요소들 추가 -->
<div class="eco-leaves">
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
  <div class="leaf"></div>
</div>

<div class="bg-grid-pattern">
  <div class="grid-lines horizontal"></div>
  <div class="grid-lines vertical"></div>
</div>

<!-- 자동 TOC 생성 JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const tocNav = document.getElementById('toc-nav');
  const content = document.querySelector('.project-content');
  
  if (!tocNav || !content) return;
  
  // h2, h3, h4 헤딩 찾기
  const headings = content.querySelectorAll('h2, h3, h4');
  
  if (headings.length === 0) {
    document.getElementById('toc-sidebar').style.display = 'none';
    return;
  }
  
  // TOC HTML 생성
  let tocHTML = '<ul class="toc-list">';
  
  headings.forEach((heading, index) => {
    // 고유 ID 생성 (없으면)
    if (!heading.id) {
      // 제목에서 특수문자 제거하고 kebab-case로 변환
      const text = heading.textContent.trim()
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '') // 특수문자 제거
        .replace(/\s+/g, '-')         // 공백을 하이픈으로
        .replace(/-+/g, '-')          // 연속 하이픈 제거
        .replace(/^-|-$/g, '');       // 앞뒤 하이픈 제거
      
      heading.id = text || 'heading-' + index;
    }
    
    // 헤딩 레벨 확인
    const level = parseInt(heading.tagName.charAt(1));
    const text = heading.textContent.trim();
    
    // 이모지 제거 (TOC에서는 깔끔하게)
    const cleanText = text.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '').trim();
    
    tocHTML += `<li class="toc-item toc-level-${level}">
      <a href="#${heading.id}" class="toc-link" data-target="${heading.id}">${cleanText}</a>
    </li>`;
  });
  
  tocHTML += '</ul>';
  tocNav.innerHTML = tocHTML;
  
  // 스무스 스크롤 이벤트
  const tocLinks = tocNav.querySelectorAll('.toc-link');
  tocLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('data-target');
      const target = document.getElementById(targetId);
      
      if (target) {
        const offsetTop = target.getBoundingClientRect().top + window.pageYOffset - 100;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });
  
  // 스크롤 시 현재 섹션 하이라이트
  function updateActiveLink() {
    let current = '';
    const scrollPos = window.pageYOffset + 150;
    
    headings.forEach(heading => {
      const offsetTop = heading.offsetTop;
      if (offsetTop <= scrollPos) {
        current = heading.id;
      }
    });
    
    // 활성 링크 업데이트
    tocLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('data-target') === current) {
        link.classList.add('active');
      }
    });
  }
  
  // 스크롤 이벤트 (throttled)
  let ticking = false;
  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(function() {
        updateActiveLink();
        ticking = false;
      });
      ticking = true;
    }
  });
  
  // 초기 활성 링크 설정
  updateActiveLink();
});
</script>

<style>
/* 🌿 프로젝트 페이지 전용 에코 테마 스타일 */

/* 기본 body 설정 */
body {
  font-family: 'Merriweather', serif !important;
  background: linear-gradient(135deg, #fefffe 0%, #f8fcf8 100%) !important;
  position: relative;
}

/* 프로젝트 히어로 섹션 */
.project-hero {
  padding: 6rem 0 4rem !important;
  text-align: center;
  background: linear-gradient(135deg, rgba(248, 252, 248, 0.7) 0%, rgba(240, 248, 240, 0.7) 50%, rgba(232, 245, 232, 0.7) 100%);
  border-bottom: 1px solid rgba(184, 212, 227, 0.2);
  position: relative;
  margin-top: 0px; /* 네비게이션 높이만큼 여백 */
}

.project-title {
  font-size: 2.5rem !important;
  margin-bottom: 0.5rem !important;
  color: var(--forest-green, #5d737e) !important;
  font-family: 'Merriweather', serif !important;
  font-weight: 300 !important;
  line-height: 1.3;
}

.project-subtitle {
  font-size: 1.2rem !important;
  color: var(--eco-green, #7fb3d3) !important;
  font-family: 'Inter', sans-serif !important;
  font-weight: 400 !important;
  opacity: 0.9;
}

/* 📋 TOC와 프로젝트 레이아웃 스타일 */
.project-layout {
  display: flex !important;
  gap: 2rem !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
  align-items: flex-start !important;
  padding: 2rem 1rem !important;
}

.project-content {
  flex: 1 !important;
  min-width: 0 !important;
  text-align: left !important;
  background: rgba(255, 255, 255, 0.9) !important;
  padding: 2rem !important;
  border-radius: 15px !important;
  box-shadow: 0 4px 20px rgba(127, 179, 211, 0.1) !important;
  border: 1px solid rgba(184, 212, 227, 0.2) !important;
}

/* 본문 타이포그래피 */
.project-content h1,
.project-content h2,
.project-content h3,
.project-content h4,
.project-content h5,
.project-content h6 {
  text-align: left !important;
  color: var(--forest-green, #5d737e) !important;
  font-family: 'Merriweather', serif !important;
  font-weight: 400 !important;
  margin-top: 2rem !important;
  margin-bottom: 1rem !important;
  scroll-margin-top: 100px !important;
}

.project-content h2 {
  font-size: 1.8rem !important;
  border-bottom: 2px solid var(--eco-green, #7fb3d3) !important;
  padding-bottom: 0.5rem !important;
}

.project-content h3 {
  font-size: 1.4rem !important;
}

.project-content h4 {
  font-size: 1.2rem !important;
}

.project-content p,
.project-content ul,
.project-content ol,
.project-content blockquote {
  text-align: left !important;
  font-family: 'Inter', sans-serif !important;
  font-size: 1rem !important;
  line-height: 1.6 !important;
  color: #444 !important;
  margin-bottom: 1rem !important;
}

.project-content ul,
.project-content ol {
  padding-left: 2rem !important;
}

.project-content li {
  margin-bottom: 0.5rem !important;
}

/* 이미지 크기 조절 */
.project-content figure img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 80% !important; /* 기본 너비를 80%로 제한 */
  max-height: 500px !important; /* 최대 높이 제한 */
  height: auto !important;
  border-radius: 12px !important;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;
  object-fit: contain !important; /* 비율 유지하면서 크기 조절 */
}

/* 일반 이미지 (figure 밖의 이미지)도 크기 제한 */
.project-content img {
  max-width: 80% !important;
  max-height: 500px !important;
  height: auto !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
  object-fit: contain !important;
  display: block !important;
  margin: 1rem auto !important;
}

/* 플로우차트/다이어그램용 클래스 - 꽉찬 너비, 배경/그림자 제거 */
.project-content .flowchart,
.project-content .diagram,
.project-content .architecture,
.project-content figure .flowchart,
.project-content figure .diagram,
.project-content figure .architecture {
  max-width: 100% !important;
  max-height: none !important;
  width: 100% !important;
  border-radius: 0 !important; /* 둥근 모서리 제거 */
  box-shadow: none !important; /* 그림자 제거 */
  background: transparent !important; /* 배경 투명 */
  margin: 2rem auto !important;
  border: none !important; /* 테두리도 제거 */
}

/* 작은 이미지용 클래스 */
.project-content .small-image,
.project-content figure .small-image {
  max-width: 50% !important;
  max-height: 250px !important;
}

/* 중간 이미지용 클래스 */
.project-content .medium-image,
.project-content figure .medium-image {
  max-width: 70% !important;
  max-height: 400px !important;
}

/* 큰 이미지용 클래스 */
.project-content .large-image,
.project-content figure .large-image {
  max-width: 95% !important;
  max-height: 700px !important;
}

/* 표만 센터 정렬 */
.project-content table {
  margin: 2rem auto !important;
  text-align: center !important;
  border-collapse: collapse !important;
  border: 1px solid rgba(184, 212, 227, 0.3) !important;
  border-radius: 8px !important;
  overflow: hidden !important;
}

.project-content table th,
.project-content table td {
  padding: 0.8rem !important;
  border: 1px solid rgba(184, 212, 227, 0.2) !important;
}

.project-content table th {
  background: rgba(127, 179, 211, 0.1) !important;
  font-weight: 600 !important;
}

.project-content figure {
  display: block !important;
  text-align: center !important;
  margin: 2rem auto !important;
}

.project-content figcaption {
  margin-top: 0.8rem !important;
  font-size: 0.9rem !important;
  color: var(--forest-green, #5d737e) !important;
  font-style: italic !important;
}

/* 비디오 wrapper */
.video-wrapper,
.project-content .video-wrapper {
  margin: 2rem auto !important;
  display: block !important;
  width: 100% !important;
  aspect-ratio: 16 / 9;
  overflow: hidden !important;
  position: relative !important;
  border-radius: 12px !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
}

.video-wrapper iframe,
.project-content .video-wrapper iframe {
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  border-radius: 12px !important;
}

/* TOC 사이드바 */
.project-toc {
  width: 240px !important;
  position: sticky !important;
  top: 100px !important;
  max-height: calc(100vh - 120px) !important;
  overflow-y: auto !important;
  padding: 1rem !important;
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  border: 1px solid rgba(127, 179, 211, 0.2) !important;
  border-radius: 12px !important;
  box-shadow: 0 4px 15px rgba(127, 179, 211, 0.15) !important;
  flex-shrink: 0 !important;
}

.project-toc h4 {
  margin: 0 0 0.8rem 0 !important;
  font-size: 0.9rem !important;
  font-weight: 600 !important;
  color: var(--forest-green, #5d737e) !important;
  border-bottom: 2px solid var(--eco-green, #7fb3d3) !important;
  padding-bottom: 0.4rem !important;
}

/* TOC 리스트 스타일 */
.toc-list {
  list-style: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.toc-item {
  margin-bottom: 0.1rem !important;
}

.toc-link {
  display: block !important;
  padding: 0.25rem 0.6rem !important;
  color: var(--forest-green, #5d737e) !important;
  text-decoration: none !important;
  font-size: 0.75rem !important;
  line-height: 1.3 !important;
  border-radius: 4px !important;
  transition: all 0.3s ease !important;
  border-left: 2px solid transparent !important;
  font-family: 'Inter', sans-serif !important;
}

.toc-link:hover {
  background: rgba(127, 179, 211, 0.1) !important;
  color: var(--eco-green, #7fb3d3) !important;
  border-left-color: var(--eco-green, #7fb3d3) !important;
  transform: translateX(2px) !important;
  text-decoration: none !important;
}

.toc-link.active {
  background: rgba(127, 179, 211, 0.15) !important;
  color: var(--eco-green, #7fb3d3) !important;
  font-weight: 500 !important;
  border-left-color: var(--eco-green, #7fb3d3) !important;
}

/* 헤딩 레벨별 들여쓰기 */
.toc-level-2 .toc-link {
  padding-left: 0.6rem !important;
  font-weight: 500 !important;
  font-size: 0.8rem !important;
}

.toc-level-3 .toc-link {
  padding-left: 1.2rem !important;
  font-size: 0.7rem !important;
  opacity: 0.9 !important;
}

.toc-level-4 .toc-link {
  padding-left: 1.8rem !important;
  font-size: 0.65rem !important;
  opacity: 0.8 !important;
}

/* 🖤 다크 테마 코드 블록 스타일 - 왼쪽 정렬 */
.project-content pre {
  background: #1e1e1e !important;
  color: #d4d4d4 !important;
  border: 1px solid #404040 !important;
  border-radius: 8px !important;
  padding: 1.2rem !important;
  overflow-x: auto !important;
  margin: 1.5rem 0 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  font-family: 'Fira Code', 'Monaco', 'Menlo', 'Consolas', monospace !important;
  font-size: 0.9rem !important;
  line-height: 1.5 !important;
  text-align: left !important; /* 코드는 무조건 왼쪽 정렬 */
  direction: ltr !important; /* 텍스트 방향 강제 지정 */
}

.project-content code {
  background: #2d2d2d !important;
  color: #f8f8f2 !important;
  padding: 0.2rem 0.5rem !important;
  border-radius: 4px !important;
  font-size: 0.9em !important;
  font-family: 'Fira Code', 'Monaco', 'Menlo', 'Consolas', monospace !important;
  border: 1px solid #404040 !important;
  text-align: left !important; /* 인라인 코드도 왼쪽 정렬 */
  direction: ltr !important;
}

.project-content pre code {
  background: transparent !important;
  color: inherit !important;
  padding: 0 !important;
  border: none !important;
  text-align: left !important; /* pre 안의 code도 왼쪽 정렬 */
  direction: ltr !important;
}

/* Back to Projects 버튼 */
.project-back {
  text-align: center !important;
  margin: 4rem 0 !important;
  padding: 2rem 0 !important;
}

.project-back .view-all-button {
  display: inline-block !important;
  background: linear-gradient(135deg, var(--eco-green, #7fb3d3) 0%, var(--light-green, #a8d8a8) 100%) !important;
  color: white !important;
  padding: 0.75rem 1.5rem !important;
  border-radius: 25px !important;
  text-decoration: none !important;
  font-weight: 500 !important;
  font-size: 0.9rem !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
  border: none !important;
  position: relative !important;
  overflow: hidden !important;
  font-family: 'Inter', sans-serif !important;
}

.project-back .view-all-button::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: all 0.6s ease;
}

.project-back .view-all-button:hover::before {
  left: 100%;
}

.project-back .view-all-button:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 6px 20px rgba(127, 179, 211, 0.3) !important;
  background: linear-gradient(135deg, var(--light-green, #a8d8a8) 0%, var(--eco-green, #7fb3d3) 100%) !important;
  color: white !important;
  text-decoration: none !important;
}

/* 태블릿 반응형 */
@media (max-width: 1024px) {
  .project-layout {
    flex-direction: column !important;
    padding: 1rem !important;
  }
  
  .project-toc {
    width: 100% !important;
    position: static !important;
    max-height: 150px !important;
    order: -1 !important;
  }
  
  .project-toc h4 {
    text-align: center !important;
    font-size: 0.85rem !important;
  }
  
  .toc-list {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 0.3rem !important;
  }
  
  .toc-item {
    margin-bottom: 0 !important;
  }
  
  .toc-link {
    font-size: 0.7rem !important;
    padding: 0.2rem 0.5rem !important;
    white-space: nowrap !important;
  }
  
  .project-content {
    padding: 1.5rem !important;
  }
  
  /* 태블릿에서 이미지 크기 */
  .project-content img,
  .project-content figure img {
    max-width: 90% !important;
    max-height: 400px !important;
  }
}

/* 모바일 반응형 */
@media (max-width: 768px) {
  .project-hero {
    padding: 5rem 0 3rem !important;
    margin-top: 60px !important;
  }
  
  .project-title {
    font-size: 2rem !important;
  }
  
  .project-subtitle {
    font-size: 1rem !important;
  }
  
  .project-layout {
    padding: 0.5rem !important;
    gap: 1rem !important;
  }
  
  .project-content {
    padding: 1rem !important;
  }
  
  .project-toc {
    padding: 0.8rem !important;
  }
  
  .toc-list {
    flex-direction: column !important;
  }
  
  .toc-level-3 .toc-link,
  .toc-level-4 .toc-link {
    padding-left: 1rem !important;
  }
  
  .project-content pre {
    font-size: 0.8rem !important;
    padding: 1rem !important;
    margin: 1rem 0 !important;
  }
  
  .project-content code {
    font-size: 0.85em !important;
    padding: 0.15rem 0.4rem !important;
  }
  
  /* 모바일에서 이미지 더 작게 */
  .project-content img,
  .project-content figure img {
    max-width: 95% !important;
    max-height: 300px !important;
  }
  
  /* 모바일에서도 플로우차트는 꽉찬 너비 유지 */
  .project-content .flowchart,
  .project-content .diagram,
  .project-content .architecture,
  .project-content figure .flowchart,
  .project-content figure .diagram,
  .project-content figure .architecture {
    max-width: 100% !important;
    max-height: 400px !important; /* 모바일에서만 높이 제한 */
  }
}

/* TOC 스크롤바 스타일 */
.project-toc::-webkit-scrollbar {
  width: 3px !important;
}

.project-toc::-webkit-scrollbar-track {
  background: rgba(127, 179, 211, 0.05) !important;
  border-radius: 2px !important;
}

.project-toc::-webkit-scrollbar-thumb {
  background: var(--eco-green, #7fb3d3) !important;
  border-radius: 2px !important;
}

.project-toc::-webkit-scrollbar-thumb:hover {
  background: var(--water-blue, #87ceeb) !important;
}

/* 코드 블록 호버 효과 */
.project-content pre:hover {
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;
  transform: translateY(-1px) !important;
  transition: all 0.3s ease !important;
}

/* 🔤 추가 코드 정렬 보장 */
.project-content .highlight,
.project-content .highlighter-rouge,
.project-content .language-python,
.project-content .language-javascript,
.project-content .language-html,
.project-content .language-css,
.project-content .language-bash,
.project-content .language-json,
.project-content .language-yaml {
  text-align: left !important;
  direction: ltr !important;
}

.project-content .highlight pre,
.project-content .highlighter-rouge pre {
  text-align: left !important;
  direction: ltr !important;
}

/* 코드 블록 내 모든 텍스트 왼쪽 정렬 */
.project-content pre *,
.project-content code * {
  text-align: left !important;
  direction: ltr !important;
}

/* CSS 변수 정의 (fallback) */
:root {
  --eco-green: #7fb3d3;
  --forest-green: #5d737e;
  --light-green: #a8d8a8;
  --water-blue: #87ceeb;
  --earth-brown: #c4a484;
  --leaf-shadow: 0 4px 15px rgba(127, 179, 211, 0.15);
  --smooth-transition: all 0.3s ease;
}

/* 에코 배경 요소들 */
.eco-leaves {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.leaf {
  position: absolute;
  width: 12px;
  height: 12px;
  background: #b8d4b8;
  border-radius: 0 100% 0 100%;
  opacity: 0.3;
  animation: leafFloat 15s infinite linear;
}

.leaf:nth-child(1) { left: 10%; animation-delay: 0s; }
.leaf:nth-child(2) { left: 20%; animation-delay: 2s; }
.leaf:nth-child(3) { left: 30%; animation-delay: 4s; }
.leaf:nth-child(4) { left: 40%; animation-delay: 6s; }
.leaf:nth-child(5) { left: 50%; animation-delay: 8s; }
.leaf:nth-child(6) { left: 60%; animation-delay: 1s; }
.leaf:nth-child(7) { left: 70%; animation-delay: 3s; }
.leaf:nth-child(8) { left: 80%; animation-delay: 5s; }

@keyframes leafFloat {
  0% {
    transform: translateY(-100px) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 0.6;
  }
  90% {
    opacity: 0.6;
  }
  100% {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0;
  }
}

.bg-grid-pattern {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 0;
  opacity: 0.005;
}

.grid-lines {
  position: absolute;
  width: 100%;
  height: 100%;
}

.grid-lines.horizontal {
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 60px,
    #b8d4e3 60px,
    #b8d4e3 61px
  );
}

.grid-lines.vertical {
  background-image: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 60px,
    #b8d4e3 60px,
    #b8d4e3 61px
  );
}

/* z-index 조정 */
.project-content,
.project-toc {
  position: relative;
  z-index: 10;
}

.project-hero {
  position: relative;
  z-index: 5;
}
</style>