---
layout: default
---

<!-- ìƒì„¸ í˜ì´ì§€ ë³¸ë¬¸ ì‹œì‘ -->
<section class="project-hero">
  <div class="container">
    <h1 class="project-title">{{ page.title }}</h1>
    {% if page.description %}
      <p class="project-subtitle">{{ page.description }}</p>
    {% endif %}
  </div>
</section>

<section class="project-overview">
  <div class="container project-layout">
    <!-- ë³¸ë¬¸ ì˜ì—­ -->
    <main class="project-content">
      {{ content }}

      {% if page.video_url %}
      <div class="video-inline">
        <h2>Demo Video</h2>
        <div class="video-wrapper">
          <iframe
            src="{{ page.video_url }}"
            title="{{ page.title }}"
            frameborder="0"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      {% endif %}
    </main>

    <!-- ìë™ TOC ì‚¬ì´ë“œë°” -->
    <aside class="project-toc" id="toc-sidebar">
      <h4>ğŸ“‹ Contents</h4>
      <nav id="toc-nav">
        <!-- TOCê°€ ì—¬ê¸°ì— ìë™ ìƒì„±ë©ë‹ˆë‹¤ -->
      </nav>
    </aside>
  </div>
</section>

<section class="project-back">
  <div class="container">
    <a href="{{ '/projects/' | relative_url }}" class="button">
      &larr; Back to Projects
    </a>
  </div>
</section>

<!-- ìë™ TOC ìƒì„± JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const tocNav = document.getElementById('toc-nav');
  const content = document.querySelector('.project-content');
  
  if (!tocNav || !content) return;
  
  // h2, h3, h4 í—¤ë”© ì°¾ê¸°
  const headings = content.querySelectorAll('h2, h3, h4');
  
  if (headings.length === 0) {
    document.getElementById('toc-sidebar').style.display = 'none';
    return;
  }
  
  // TOC HTML ìƒì„±
  let tocHTML = '<ul class="toc-list">';
  
  headings.forEach((heading, index) => {
    // ê³ ìœ  ID ìƒì„± (ì—†ìœ¼ë©´)
    if (!heading.id) {
      // ì œëª©ì—ì„œ íŠ¹ìˆ˜ë¬¸ì ì œê±°í•˜ê³  kebab-caseë¡œ ë³€í™˜
      const text = heading.textContent.trim()
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '') // íŠ¹ìˆ˜ë¬¸ì ì œê±°
        .replace(/\s+/g, '-')         // ê³µë°±ì„ í•˜ì´í”ˆìœ¼ë¡œ
        .replace(/-+/g, '-')          // ì—°ì† í•˜ì´í”ˆ ì œê±°
        .replace(/^-|-$/g, '');       // ì•ë’¤ í•˜ì´í”ˆ ì œê±°
      
      heading.id = text || 'heading-' + index;
    }
    
    // í—¤ë”© ë ˆë²¨ í™•ì¸
    const level = parseInt(heading.tagName.charAt(1));
    const text = heading.textContent.trim();
    
    // ì´ëª¨ì§€ ì œê±° (TOCì—ì„œëŠ” ê¹”ë”í•˜ê²Œ)
    const cleanText = text.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '').trim();
    
    tocHTML += `<li class="toc-item toc-level-${level}">
      <a href="#${heading.id}" class="toc-link" data-target="${heading.id}">${cleanText}</a>
    </li>`;
  });
  
  tocHTML += '</ul>';
  tocNav.innerHTML = tocHTML;
  
  // ìŠ¤ë¬´ìŠ¤ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸
  const tocLinks = tocNav.querySelectorAll('.toc-link');
  tocLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('data-target');
      const target = document.getElementById(targetId);
      
      if (target) {
        const offsetTop = target.getBoundingClientRect().top + window.pageYOffset - 100;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });
  
  // ìŠ¤í¬ë¡¤ ì‹œ í˜„ì¬ ì„¹ì…˜ í•˜ì´ë¼ì´íŠ¸
  function updateActiveLink() {
    let current = '';
    const scrollPos = window.pageYOffset + 150;
    
    headings.forEach(heading => {
      const offsetTop = heading.offsetTop;
      if (offsetTop <= scrollPos) {
        current = heading.id;
      }
    });
    
    // í™œì„± ë§í¬ ì—…ë°ì´íŠ¸
    tocLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('data-target') === current) {
        link.classList.add('active');
      }
    });
  }
  
  // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ (throttled)
  let ticking = false;
  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(function() {
        updateActiveLink();
        ticking = false;
      });
      ticking = true;
    }
  });
  
  // ì´ˆê¸° í™œì„± ë§í¬ ì„¤ì •
  updateActiveLink();
});
</script>

<style>
/* ğŸ“‹ TOCì™€ í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ */
.project-layout {
  display: flex;
  gap: 2rem;
  max-width: 1400px;
  margin: 0 auto;
  align-items: flex-start;
}

.project-content {
  flex: 1;
  min-width: 0;
  /* ë³¸ë¬¸ì€ ì™¼ìª½ ì •ë ¬ ìœ ì§€ */
  text-align: left;
}

/* ğŸ“Š í‘œì™€ ê·¸ë¦¼ë§Œ ì„¼í„° ì •ë ¬ */
.project-content table {
  margin: 2rem auto !important;
  text-align: center;
}

.project-content figure {
  display: block;
  text-align: center !important;
  margin: 2rem auto !important;
}

.project-content figure img {
  display: block;
  margin: 0 auto;
}

.project-content .video-wrapper {
  margin: 2rem auto !important;
}

/* TOC ì‚¬ì´ë“œë°” */
.project-toc {
  width: 280px;
  position: sticky;
  top: 120px;
  max-height: calc(100vh - 140px);
  overflow-y: auto;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(127, 179, 211, 0.2);
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(127, 179, 211, 0.15);
  flex-shrink: 0;
}

.project-toc h4 {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  font-weight: 600;
  color: #5d737e;
  border-bottom: 2px solid #7fb3d3;
  padding-bottom: 0.5rem;
}

/* TOC ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc-item {
  margin-bottom: 0.2rem;
}

.toc-link {
  display: block;
  padding: 0.4rem 0.8rem;
  color: #5d737e;
  text-decoration: none;
  font-size: 0.85rem;
  line-height: 1.4;
  border-radius: 6px;
  transition: all 0.3s ease;
  border-left: 3px solid transparent;
}

.toc-link:hover {
  background: rgba(127, 179, 211, 0.1);
  color: #7fb3d3;
  border-left-color: #7fb3d3;
  transform: translateX(3px);
}

.toc-link.active {
  background: rgba(127, 179, 211, 0.15);
  color: #7fb3d3;
  font-weight: 500;
  border-left-color: #7fb3d3;
}

/* í—¤ë”© ë ˆë²¨ë³„ ë“¤ì—¬ì“°ê¸° */
.toc-level-2 .toc-link {
  padding-left: 0.8rem;
  font-weight: 500;
  font-size: 0.9rem;
}

.toc-level-3 .toc-link {
  padding-left: 1.6rem;
  font-size: 0.8rem;
  opacity: 0.9;
}

.toc-level-4 .toc-link {
  padding-left: 2.4rem;
  font-size: 0.75rem;
  opacity: 0.8;
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 1024px) {
  .project-layout {
    flex-direction: column;
  }
  
  .project-toc {
    width: 100%;
    position: static;
    max-height: none;
    order: -1; /* ëª¨ë°”ì¼ì—ì„œëŠ” ìƒë‹¨ì— í‘œì‹œ */
  }
  
  .project-toc h4 {
    text-align: center;
  }
  
  /* ëª¨ë°”ì¼ì—ì„œëŠ” TOCë¥¼ ì ‘ì„ ìˆ˜ ìˆê²Œ */
  .toc-list {
    max-height: 200px;
    overflow-y: auto;
  }
}

@media (max-width: 768px) {
  .project-layout {
    padding: 1rem;
    gap: 1rem;
  }
  
  .toc-link {
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
  }
  
  .toc-level-3 .toc-link,
  .toc-level-4 .toc-link {
    padding-left: 1.2rem;
  }
}

/* TOC ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
.project-toc::-webkit-scrollbar {
  width: 4px;
}

.project-toc::-webkit-scrollbar-track {
  background: rgba(127, 179, 211, 0.1);
  border-radius: 2px;
}

.project-toc::-webkit-scrollbar-thumb {
  background: #7fb3d3;
  border-radius: 2px;
}

.project-toc::-webkit-scrollbar-thumb:hover {
  background: #87ceeb;
}

/* ë³¸ë¬¸ ë‚´ìš©ì´ TOCë³´ë‹¤ ìš°ì„ ì‹œë˜ë„ë¡ */
.project-content h2,
.project-content h3,
.project-content h4 {
  scroll-margin-top: 120px; /* ìŠ¤í¬ë¡¤ ì‹œ í—¤ë” ê³µê°„ í™•ë³´ */
}

/* ë³¸ë¬¸ í…ìŠ¤íŠ¸ëŠ” ì™¼ìª½ ì •ë ¬ ìœ ì§€ */
.project-content p,
.project-content ul,
.project-content ol,
.project-content blockquote {
  text-align: left;
}

/* ì½”ë“œ ë¸”ë¡ì€ ì™¼ìª½ ì •ë ¬ */
.project-content pre,
.project-content code {
  text-align: left;
}
</style>